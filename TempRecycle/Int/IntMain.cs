using TempRecycle.Utils;

namespace TempRecycle.Int
{
    public static class IntMain
    {
        public static async Task ImplementInt() {

            int currentLine = Console.CursorTop;

            string logo = @"
                                  .     .  ......                    .                .                       
                                           ...#*....    .                .                      .        .    
                  . .             ..-....  ..+.#@+....   ..                                                   
                           .  .  ...:%#:. ...+@+-%@+.....                                        .  ..        
                   .             ..=+.*@@*:...*@@*:#@*... .                               .     .             
                                    -@%==%@@#-..#@@%-+@#:..        .             .                            
                                    ..=@@@*:*@@@+.-%@@%-%@=......    .  .                            .        
                   .                .=%=.:#@@@%=*@@@+:+@@%+@%....  .              ...       .       .         
                           . . .  . ..:%@@@%*-+@@@%**@%#*:+@%#%#:..           .   .--#....         .          
                    .      .        ...:-.-+#@@@%#*#@@%%#%%**-+@@@#-....     .    .-@*%%+....     .           
                             .        ..:%@@%#*+=+*@@%%%%@@%%%#*+=+%@%+.... .. ....%@@@@@@%*:...              
                                    .   ..-=+*#%@@@@%#*##%@%%@@@@%**==*%@#-... ...=@@@@@@+**%:..              
                           .             .-%@@@@@@@%#**##%%@%%%@@@@@@%+*==#@%:...*@@@@@@%#*%%++...            
                   .                     ......::----==++**##%%@@@@@@@@@@*+%=%#.=@@@@#@@@#**%%%=..            
                            .              ...+@@@@@%*==*@@@#%@%@@@@@@@@@@@@##*%%@@@@%:#@+........            
                       .                      .-#%@@@@%+#@@*#@#%@%@@@@@@@@@@@@=@@#@@@%=%%#:..          .      
                           .                  ....:*%@@#=#@@+%@#@%@@@@@@@@@@%--@*+@+@@%%#++%-...              
                                        ..    .  ..:--#@@++@@*%%@@@@@@@@@@@@#.#@*:@#-@@%=+%%+... .            
                      . .       .  .               ...-:+@@+*%#@@@@@@@@@@@@@%.#@@::#%-#@@%#**-..              
                   .          .           .           ........--*#@@@@@@@@@@@%:*%%+.:==*#@*%@-..              
                                        .   . .    .....-#@@@@@@@@@@@@@@@@@@@@@@@@@@-=*-*#@=@+...         .  .
                                   .             . ..*@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@=%#@=@=*:..   .     .    
                                       .    .  . .:%@@@@@@@@@@@@#@@@@@@@@@@@@@@@@@@@@%#%@#+-...               
                     .         ...            ..:%@@%=%@@@@@@@@@#%@@@@@@@@@@@@@@@@@@@@@*@#......              
                    .    ......:::.......   ...#@%#:.=@@@@@@@@@@%#@@@@@@@@@@@@@@@@@%@@@+#......      .        
                  .      ..-+-...:%+.=-..  ..=@#+....%@@@@@@@@@@+%@@@@@@@@@@@@@@@@@*@++#@#+:.... .    .       
                         .=-..  ..**=#@*:...#%+....:%@@@@@@@@@@**@@@@@@@@@@#@@@@@@++..=*%%@+-+*...            
                       ...=...   .........-@#....-%@@@@@@@@@@%%@@%::#+=%%@@@#@@@@#..........-@#--..    .      
                       ...=..       .....%@--#@@@@@@@@@@@@@%%@@@#.........:%%@@@%..       ..+++@-=..  .       
                         .+:..    ....:%@-..*@@@@@@@%+:+@@@@@@@=...    .  ..#@@@-..   .  ......*-+..          
                         ..*#......:*@#:....@@@@%:......:*%@@*... .       ..=@@=...      .  ..:+-.... .       
                         ....-+#%#*=:......-@@#+....  ....*@%....    .    ..-@@..           ......            
                           .........  .  ..+@@==.      ...-##.         .  ..=@%.    .               .    ..   
                      .   .              ..*@@@%+--:..  ..:%@:.....  ...-==*@@#=::=:..                        
                          .              ..=#######*..  ..:%%%%%%+.  ..:%%@%#@@%%@%*+.           .            
                            ...   ......................................................   .... .             
                                 .......................................................  ........ .          
            ▄▀▀▀█▀▀▄  ▄▀▀█▄▄▄▄  ▄▀▀▄ ▄▀▄  ▄▀▀▄▀▀▀▄  ▄▀▀▄▀▀▀▄  ▄▀▀█▄▄▄▄  ▄▀▄▄▄▄   ▄▀▀▄ ▀▀▄  ▄▀▄▄▄▄   ▄▀▀▀▀▄     ▄▀▀█▄▄▄▄ 
           █    █  ▐ ▐  ▄▀   ▐ █  █ ▀  █ █   █   █ █   █   █ ▐  ▄▀   ▐ █ █    ▌ █   ▀▄ ▄▀ █ █    ▌ █    █     ▐  ▄▀   ▐ 
           ▐   █       █▄▄▄▄▄  ▐  █    █ ▐  █▀▀▀▀  ▐  █▀▀█▀    █▄▄▄▄▄  ▐ █      ▐     █   ▐ █      ▐    █       █▄▄▄▄▄  
              █        █    ▌    █    █     █       ▄▀    █    █    ▌    █            █     █          █        █    ▌  
            ▄▀        ▄▀▄▄▄▄   ▄▀   ▄▀    ▄▀       █     █    ▄▀▄▄▄▄    ▄▀▄▄▄▄▀     ▄▀     ▄▀▄▄▄▄▀   ▄▀▄▄▄▄▄▄▀ ▄▀▄▄▄▄   
           █          █    ▐   █    █    █         ▐     ▐    █    ▐   █     ▐      █     █     ▐    █         █    ▐   
           ▐          ▐        ▐    ▐    ▐                    ▐        ▐            ▐     ▐          ▐         ▐       by Dario Marzzucco
";
            Console.ForegroundColor = ConsoleColor.Cyan;
            Console.WriteLine("");
            Console.WriteLine(logo);
            Console.WriteLine("");
            Console.WriteLine("Push (E) to scan. (N) to cancel");
            string? respuesta = Console.ReadLine()?.Trim().ToUpper();

            if (string.IsNullOrEmpty(respuesta))
            {
                BoxMessage.ShowError("No data was entered", ref currentLine);
                Console.WriteLine("Push any key to close...");
                Console.ReadKey();
                return;
            }

            if (respuesta == "E")
            {
                // Path
                string? tempPath = Environment.GetEnvironmentVariable("TEMP");

                if (tempPath == null)
                {
                    BoxMessage.ShowError("TEMP is null", ref currentLine);
                    return;
                }
                //
                var (fileCount, folderCount, totalSize) = await CountFiles.GetFileAndSizeAsync(tempPath);
                Console.Clear();

            }
            else if (respuesta == "N")
            {
                Console.WriteLine("");
                BoxMessage.ShowInfo("Cancel Operation", ref currentLine);
                Console.WriteLine("");
            }
            else
            {
                BoxMessage.ShowError("Faild Operation", ref currentLine);
            }
        }
    }
}
